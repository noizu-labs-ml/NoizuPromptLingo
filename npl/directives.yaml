name: directives
slug: directives
brief: Specialized instruction patterns for agent behavior control
description: |
  Specialized instruction patterns for precise agent behavior modification and output control using structured command syntax with emoji prefixes.
purpose: |
  Directives provide fine-grained control over agent behavior, output formatting, and interaction patterns through structured command syntax that extends beyond basic prompt instructions.
components:
  - name: table-formatting
    syntax: "âŸªâ–¦: (column alignments and labels) | content descriptionâŸ«"
    brief: Format data into structured tables
    description: Controls structured table output with specified column alignments, headers, and content descriptions. Supports left, right, center alignment per column.
    labels:
      - formatting
      - output
      - inline
    require:
      - syntax.placeholder
      - syntax.qualifier
    examples:
      - name: basic-table
        brief: Simple table directive
        description: Basic table formatting with column specification.
        priority: 0
        purpose: Demonstrates basic table directive
        labels:
          - "âŸªâ–¦:âŸ«"
        example: |
          âŸªâ–¦: (name:left, value:right) | sample dataâŸ«
      - name: table-with-output
        brief: Table with result
        description: Table directive with formatted output.
        priority: 1
        purpose: Shows table directive with output
        labels:
          - "âŸªâ–¦:âŸ«"
          - "âŸªâ–¦: (columns) | contentâŸ«"
        thread:
          - role: system
            message: |
              âŸªâ–¦: (#:left, item:left, price:right) | top 3 menu itemsâŸ«
          - role: assistant
            message: |
              | # | Item | Price |
              |---|------|------:|
              | 1 | Burger | $12.99 |
              | 2 | Pizza | $15.99 |
              | 3 | Salad | $9.99 |
      - name: complex-table
        brief: Table with label and alignments
        description: Table with custom label and multiple alignment options.
        priority: 2
        purpose: Demonstrates full table syntax
        labels:
          - "âŸªâ–¦:âŸ«"
          - "âŸªâ–¦: (col:align label Name) | contentâŸ«"
          - ":left"
          - ":right"
          - ":center"
        thread:
          - role: system
            message: |
              Generate a formatted table of metrics.
          - role: user
            message: |
              âŸªâ–¦: (metric:left, q1:right, q2:right, change:center label Quarterly Report) | sales metricsâŸ«
          - role: assistant
            message: |
              **Quarterly Report**
              | Metric | Q1 | Q2 | Change |
              |--------|---:|---:|:------:|
              | Revenue | $1.2M | $1.5M | +25% |
              | Users | 10K | 15K | +50% |
              | Churn | 5% | 3% | -40% |
  - name: diagram-visualization
    syntax: "âŸªğŸ“Š: <engine> <chart-type> | content descriptionâŸ«"
    brief: Generate diagrams and visualizations
    description: Instructs agents to generate diagrams, charts, and visualizations using specified rendering engines. Supports multiple visualization libraries and output formats.
    labels:
      - visualization
      - diagram
      - output
      - inline
    require:
      - syntax.placeholder
      - syntax.qualifier
    examples:
      - name: basic-diagram
        brief: Simple diagram directive
        description: Basic diagram generation with engine and type.
        priority: 0
        purpose: Demonstrates basic diagram directive
        labels:
          - "âŸªğŸ“Š:âŸ«"
        example: |
          âŸªğŸ“Š: mermaid flowchart | user login processâŸ«
      - name: diagram-with-output
        brief: Diagram with result
        description: Diagram directive with generated output.
        priority: 1
        purpose: Shows diagram directive with output
        labels:
          - "âŸªğŸ“Š:âŸ«"
          - "âŸªğŸ“Š: <engine> <type> | contentâŸ«"
        thread:
          - role: system
            message: |
              âŸªğŸ“Š: mermaid sequence-diagram | API authentication flowâŸ«
          - role: assistant
            message: |
              ```mermaid
              sequenceDiagram
                  Client->>Server: POST /login
                  Server->>Database: Validate credentials
                  Database-->>Server: User data
                  Server-->>Client: JWT token
              ```
      - name: multi-engine-diagrams
        brief: Multiple diagram engines
        description: Diagram generation with different engines.
        priority: 2
        purpose: Demonstrates various diagram engines
        labels:
          - "âŸªğŸ“Š:âŸ«"
          - "âŸªğŸ“Š: <engine> <type> | contentâŸ«"
          - "mermaid"
          - "graphviz"
          - "d3.js"
        thread:
          - role: system
            message: |
              Generate diagrams using appropriate engines.
          - role: user
            message: |
              âŸªğŸ“Š: graphviz digraph | module dependenciesâŸ«
              âŸªğŸ“Š: d3.js bar-chart | monthly revenue | animated: trueâŸ«
          - role: assistant
            message: |
              **Module Dependencies (Graphviz)**:
              ```dot
              digraph {
                  main -> utils
                  main -> api
                  api -> database
              }
              ```

              **Monthly Revenue (D3.js)**:
              [Animated bar chart showing Jan-Dec revenue data]
  - name: temporal-control
    syntax: "âŸªâ³: Time Condition or InstructionâŸ«"
    brief: Time-based task execution
    description: Instructs agents to incorporate temporal considerations including scheduling, timing constraints, deadlines, and time-based triggers for automated actions.
    labels:
      - timing
      - scheduling
      - inline
    examples:
      - name: basic-temporal
        brief: Simple time directive
        description: Basic time-based scheduling.
        priority: 0
        purpose: Demonstrates basic temporal directive
        labels:
          - "âŸªâ³:âŸ«"
        example: |
          âŸªâ³: Every day at 9 AMâŸ« Send reminder email
      - name: temporal-with-output
        brief: Temporal with scheduled action
        description: Temporal directive with action confirmation.
        priority: 1
        purpose: Shows temporal directive with output
        labels:
          - "âŸªâ³:âŸ«"
          - "âŸªâ³: conditionâŸ« action"
        thread:
          - role: system
            message: |
              âŸªâ³: 30 seconds after form submissionâŸ« Send confirmation email
          - role: assistant
            message: |
              Scheduled action configured:
              - Trigger: Form submission + 30s delay
              - Action: Send confirmation email
              - Status: Active
      - name: complex-temporal
        brief: Multiple temporal conditions
        description: Various temporal constraint patterns.
        priority: 2
        purpose: Demonstrates various temporal patterns
        labels:
          - "âŸªâ³:âŸ«"
          - "âŸªâ³: conditionâŸ« action"
          - "recurring"
          - "deadline"
          - "delay"
        thread:
          - role: system
            message: |
              Configure scheduled tasks.
          - role: user
            message: |
              âŸªâ³: Within 5 minutesâŸ« Process incoming data
              âŸªâ³: At end of each dayâŸ« Generate summary report
              âŸªâ³: Maximum 10 minutesâŸ« Complete analysis, prioritize key sections
          - role: assistant
            message: |
              Scheduled tasks configured:
              1. Data processing: 5-minute deadline constraint
              2. Summary report: Daily at 23:59
              3. Analysis: 10-minute max duration with priority handling
  - name: template-integration
    syntax: "âŸªâ‡†: template-name | application contextâŸ«"
    brief: Integrate predefined templates
    description: Enables seamless integration of predefined templates into agent outputs with variable substitution and data binding from external sources.
    labels:
      - template
      - integration
      - inline
    require:
      - syntax.placeholder
      - special-sections.named-template
    examples:
      - name: basic-template
        brief: Simple template directive
        description: Basic template integration.
        priority: 0
        purpose: Demonstrates basic template directive
        labels:
          - "âŸªâ‡†:âŸ«"
        example: |
          âŸªâ‡†: user-card | with user dataâŸ«
      - name: template-with-output
        brief: Template with result
        description: Template directive with rendered output.
        priority: 1
        purpose: Shows template directive with output
        labels:
          - "âŸªâ‡†:âŸ«"
          - "âŸªâ‡†: template | contextâŸ«"
        thread:
          - role: system
            message: |
              âŸªâ‡†: product-card | for featured itemâŸ«
              Data: {name: "Pro Widget", price: 99.99, rating: 4.5}
          - role: assistant
            message: |
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ **Pro Widget**      â”‚
              â”‚ $99.99              â”‚
              â”‚ â˜…â˜…â˜…â˜…Â½ (4.5)        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      - name: template-with-loop
        brief: Template in iteration
        description: Template applied with foreach loop.
        priority: 2
        purpose: Demonstrates template with iteration
        labels:
          - "âŸªâ‡†:âŸ«"
          - "âŸªâ‡†: template | contextâŸ«"
          - "{foreach}"
        thread:
          - role: system
            message: |
              Apply template to each item.
          - role: user
            message: |
              ## Team Members
              {foreach team.members as member}
              âŸªâ‡†: profile-card | with member dataâŸ«
              {/foreach}
          - role: assistant
            message: |
              ## Team Members

              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ **Alice Chen**             â”‚
              â”‚ Engineering Lead           â”‚
              â”‚ alice@example.com          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ **Bob Smith**              â”‚
              â”‚ Product Manager            â”‚
              â”‚ bob@example.com            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  - name: interactive-element
    syntax: "âŸªğŸš€: Action or Behavior DefinitionâŸ«"
    brief: Choreograph interactive behaviors
    description: Defines interactive behaviors, user-triggered actions, and dynamic response patterns that adapt based on user interactions, system events, or environmental changes.
    labels:
      - interactive
      - trigger
      - inline
    examples:
      - name: basic-interactive
        brief: Simple interactive directive
        description: Basic user action trigger.
        priority: 0
        purpose: Demonstrates basic interactive directive
        labels:
          - "âŸªğŸš€:âŸ«"
        example: |
          âŸªğŸš€: User clicks submitâŸ« Validate and show confirmation
      - name: interactive-with-output
        brief: Interactive with response
        description: Interactive directive with behavior definition.
        priority: 1
        purpose: Shows interactive directive with output
        labels:
          - "âŸªğŸš€:âŸ«"
          - "âŸªğŸš€: triggerâŸ« action"
        thread:
          - role: system
            message: |
              âŸªğŸš€: User hovers over termâŸ« Show tooltip with definition
          - role: assistant
            message: |
              Interactive behavior configured:
              - Trigger: mouseenter on .term elements
              - Action: Display tooltip overlay
              - Position: Above element, centered
              - Dismiss: On mouseleave
      - name: complex-interactive
        brief: Multiple interaction patterns
        description: Various interactive behavior types.
        priority: 2
        purpose: Demonstrates various interactive patterns
        labels:
          - "âŸªğŸš€:âŸ«"
          - "âŸªğŸš€: triggerâŸ« action"
          - "â†’ (chain)"
          - "conditional"
        thread:
          - role: system
            message: |
              Define UI interaction behaviors.
          - role: user
            message: |
              âŸªğŸš€: Form submitâŸ« â†’ âŸªğŸš€: ValidateâŸ« â†’ âŸªğŸš€: Show resultâŸ«
              âŸªğŸš€: If premium userâŸ« Show advanced options
              âŸªğŸš€: If basic userâŸ« Show upgrade prompt
          - role: assistant
            message: |
              Behaviors configured:
              1. Form flow: Submit â†’ Validate â†’ Result (chained)
              2. User-tier branching:
                 - Premium: Advanced options panel
                 - Basic: Upgrade CTA modal
  - name: identifier-management
    syntax: "âŸªğŸ†”: Entity or Context Requiring IDâŸ«"
    brief: Generate and manage unique identifiers
    description: Instructs agents to generate, manage, and maintain unique identifiers for entities, sessions, records, or other objects requiring distinct identification.
    labels:
      - identifier
      - generation
      - inline
    examples:
      - name: basic-identifier
        brief: Simple identifier directive
        description: Basic ID generation request.
        priority: 0
        purpose: Demonstrates basic identifier directive
        labels:
          - "âŸªğŸ†”:âŸ«"
        example: |
          âŸªğŸ†”: User SessionâŸ« Generate session ID for login
      - name: identifier-with-output
        brief: Identifier with result
        description: Identifier directive with generated output.
        priority: 1
        purpose: Shows identifier directive with output
        labels:
          - "âŸªğŸ†”:âŸ«"
          - "âŸªğŸ†”: entityâŸ« instruction"
        thread:
          - role: system
            message: |
              âŸªğŸ†”: OrderâŸ« Generate human-readable order reference
          - role: assistant
            message: |
              Generated: ORD-2024-00847
              Format: ORD-{YEAR}-{SEQUENCE}
              Uniqueness: Verified against existing orders
      - name: multi-identifier
        brief: Multiple ID types
        description: Various identifier generation patterns.
        priority: 2
        purpose: Demonstrates various identifier types
        labels:
          - "âŸªğŸ†”:âŸ«"
          - "âŸªğŸ†”: entityâŸ« instruction"
          - "uuid"
          - "sequential"
          - "token"
        thread:
          - role: system
            message: |
              Generate identifiers for new user registration.
          - role: user
            message: |
              âŸªğŸ†”: User AccountâŸ« Permanent UUID
              âŸªğŸ†”: Activation TokenâŸ« Temporary secure token
              âŸªğŸ†”: Display IDâŸ« Human-readable username suffix
          - role: assistant
            message: |
              Generated identifiers:
              - User Account: 7f3a8b2c-4d5e-6f7a-8b9c-0d1e2f3a4b5c
              - Activation Token: act_Kj8mNp2xQr5tVw9y (expires: 24h)
              - Display ID: user#4827
  - name: explanatory-note
    syntax: "âŸªğŸ“–: Detailed ExplanationâŸ«"
    brief: Append instructive comments
    description: Provides detailed explanatory notes that clarify intent, expectations, constraints, or context behind specific instructions or behaviors.
    labels:
      - annotation
      - documentation
      - inline
    examples:
      - name: basic-note
        brief: Simple explanatory note
        description: Basic annotation for context.
        priority: 0
        purpose: Demonstrates basic explanatory directive
        labels:
          - "âŸªğŸ“–:âŸ«"
        example: |
          âŸªğŸ“–: Ensure user consent before data collectionâŸ«
      - name: note-with-output
        brief: Note with contextual action
        description: Explanatory note applied to task.
        priority: 1
        purpose: Shows explanatory note with output
        labels:
          - "âŸªğŸ“–:âŸ«"
          - "âŸªğŸ“–: noteâŸ« instruction"
        thread:
          - role: system
            message: |
              âŸªğŸ“–: Never log passwords or tokensâŸ« Implement activity logging
          - role: assistant
            message: |
              ```python
              def log_activity(user_id, action, details):
                  # Sensitive fields are automatically redacted
                  safe_details = redact_sensitive(details)
                  logger.info(f"User {user_id}: {action}", extra=safe_details)
              ```
      - name: multi-note-context
        brief: Multiple contextual notes
        description: Multiple annotations for comprehensive guidance.
        priority: 2
        purpose: Demonstrates multiple explanatory notes
        labels:
          - "âŸªğŸ“–:âŸ«"
          - "âŸªğŸ“–: noteâŸ« instruction"
          - "âŸªğŸ“–: noteâŸ« (standalone)"
        thread:
          - role: system
            message: |
              Design a user data form with these constraints.
          - role: user
            message: |
              âŸªğŸ“–: GDPR compliance required for EU usersâŸ«
              âŸªğŸ“–: All fields must be keyboard accessibleâŸ«
              âŸªğŸ“–: Error messages should guide without exposing system detailsâŸ«
              Create registration form
          - role: assistant
            message: |
              Form designed with:
              - Explicit consent checkbox (GDPR)
              - Tab-navigable fields with ARIA labels
              - User-friendly validation: "Please enter a valid email" (not "Invalid format: regex mismatch")
  - name: section-reference
    syntax: "âŸªğŸ“‚:{identifier}âŸ«"
    brief: Mark sections for reference
    description: Creates navigable reference points within documents enabling easy cross-referencing, content updates, and section-specific operations.
    labels:
      - reference
      - navigation
      - inline
    require:
      - syntax.placeholder
    examples:
      - name: basic-reference
        brief: Simple section reference
        description: Basic section marker for referencing.
        priority: 0
        purpose: Demonstrates basic section reference directive
        labels:
          - "âŸªğŸ“‚:{id}âŸ«"
        example: |
          âŸªğŸ“‚:{installation}âŸ« Follow the steps below to install.
      - name: reference-with-output
        brief: Reference with cross-linking
        description: Section reference with navigation context.
        priority: 1
        purpose: Shows section reference with output
        labels:
          - "âŸªğŸ“‚:{id}âŸ«"
          - "cross-reference"
        thread:
          - role: system
            message: |
              âŸªğŸ“‚:{auth_api}âŸ« Authentication Endpoints

              For setup, see âŸªğŸ“‚:{installation}âŸ«
          - role: assistant
            message: |
              ## Authentication Endpoints {#auth_api}

              | Endpoint | Method | Description |
              |----------|--------|-------------|
              | /login | POST | User authentication |
              | /logout | POST | End session |

              *Related: [Installation Guide](#installation)*
      - name: document-structure-refs
        brief: Full document with references
        description: Hierarchical document with section markers.
        priority: 2
        purpose: Demonstrates document structure referencing
        labels:
          - "âŸªğŸ“‚:{id}âŸ«"
          - "cross-reference"
          - "hierarchy"
        thread:
          - role: system
            message: |
              Create document with navigable sections.
          - role: user
            message: |
              # Manual âŸªğŸ“‚:{root}âŸ«
              ## Setup âŸªğŸ“‚:{setup}âŸ«
              ## Config âŸªğŸ“‚:{config}âŸ«
              ## FAQ âŸªğŸ“‚:{faq}âŸ«

              Index all sections.
          - role: assistant
            message: |
              **Navigation Index**
              - [Manual](#root)
                - [Setup](#setup)
                - [Configuration](#config)
                - [FAQ](#faq)

              Cross-references enabled for internal linking.
  - name: explicit-instruction
    syntax: "âŸªâ¤: instruction | elaborationâŸ«"
    brief: Direct and precise instructions
    description: Delivers clear, unambiguous instructions to agents ensuring precise execution of specific tasks with optional elaboration for complex requirements.
    labels:
      - instruction
      - priority
      - inline
    require:
      - syntax.qualifier
    examples:
      - name: basic-instruction
        brief: Simple explicit instruction
        description: Basic instruction with elaboration.
        priority: 0
        purpose: Demonstrates basic explicit instruction directive
        labels:
          - "âŸªâ¤:âŸ«"
        example: |
          âŸªâ¤: Validate input | Check required fieldsâŸ«
      - name: instruction-with-output
        brief: Instruction with result
        description: Explicit instruction with executed output.
        priority: 1
        purpose: Shows explicit instruction with output
        labels:
          - "âŸªâ¤:âŸ«"
          - "âŸªâ¤: instruction | elaborationâŸ«"
        thread:
          - role: system
            message: |
              âŸªâ¤: Sort records | By timestamp desc, then priorityâŸ«
          - role: assistant
            message: |
              Records sorted:
              1. [2024-01-15 14:30] Priority: High - Server outage
              2. [2024-01-15 14:30] Priority: Medium - API latency
              3. [2024-01-15 09:00] Priority: High - Database backup
              4. [2024-01-14 16:45] Priority: Low - Log rotation
      - name: combined-instructions
        brief: Instructions with other directives
        description: Explicit instructions combined with other directives.
        priority: 2
        purpose: Demonstrates instruction combinations
        labels:
          - "âŸªâ¤:âŸ«"
          - "âŸªâ¤: instruction | elaborationâŸ«"
          - "combined"
        thread:
          - role: system
            message: |
              Generate a performance report.
          - role: user
            message: |
              âŸªâ–¦: (metric:left, value:right) | performance dataâŸ«
              âŸªâ¤: Include only metrics above threshold | threshold: 80%âŸ«
              âŸªâ¤: Add trend indicators | compare to last monthâŸ«
          - role: assistant
            message: |
              | Metric | Value |
              |--------|------:|
              | Uptime | 99.9% â†‘ |
              | Response Time | 85ms â†“ |
              | Success Rate | 98.5% â†’ |

              *Filtered: 3 metrics below 80% threshold omitted*
  - name: todo-task
    syntax: "âŸªâ¬œ: task| detailsâŸ«"
    brief: Define tasks and action items
    description: Creates task items with descriptions and optional details. Used for tracking action items, requirements, and work to be completed within prompts or agent workflows.
    labels:
      - task
      - tracking
      - inline
    require:
      - syntax.qualifier
    examples:
      - name: basic-task
        brief: Simple task directive
        description: Basic task definition.
        priority: 0
        purpose: Demonstrates basic task directive
        labels:
          - "âŸªâ¬œ:âŸ«"
        example: |
          âŸªâ¬œ: Review pull requestâŸ«
      - name: task-with-output
        brief: Task with tracking
        description: Task directive with status tracking.
        priority: 1
        purpose: Shows task directive with output
        labels:
          - "âŸªâ¬œ:âŸ«"
          - "âŸªâ¬œ: task| detailsâŸ«"
        thread:
          - role: system
            message: |
              âŸªâ¬œ: Fix auth bug| priority: high, blocking releaseâŸ«
          - role: assistant
            message: |
              Task created:
              - [ ] Fix auth bug
                - Priority: High
                - Status: Blocking release
                - Added to sprint backlog
      - name: task-checklist
        brief: Multiple tasks with dependencies
        description: Task list with relationships and conditions.
        priority: 2
        purpose: Demonstrates task list patterns
        labels:
          - "âŸªâ¬œ:âŸ«"
          - "âŸªâ¬œ: task| detailsâŸ«"
          - "depends"
          - "subtasks"
        thread:
          - role: system
            message: |
              Create task checklist for deployment.
          - role: user
            message: |
              âŸªâ¬œ: Run tests| required before deployâŸ«
              âŸªâ¬œ: Deploy to staging| depends: tests-passâŸ«
              âŸªâ¬œ: Production deploy| subtasks: backup, migrate, verifyâŸ«
          - role: assistant
            message: |
              Deployment Checklist:
              1. [ ] Run tests (blocking)
              2. [ ] Deploy to staging (after #1)
              3. [ ] Production deploy
                 - [ ] Backup database
                 - [ ] Run migrations
                 - [ ] Verify deployment
